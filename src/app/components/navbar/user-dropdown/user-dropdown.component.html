<div class="relative user-dropdown-container">
  <button (click)="toggleUserDropdown($event)"
          class="w-9 h-9 rounded-full flex items-center justify-center text-xs font-semibold tracking-wider transition-all duration-300 cursor-pointer"
          [style.background-color]="showUserDropdown ? 'var(--color-gold)' : 'var(--color-parchment)'"
          [style.color]="showUserDropdown ? 'white' : 'var(--color-charcoal)'"
          style="font-family: var(--font-heading);">
    {{ getUserInitials() }}
  </button>

  <!-- User Dropdown -->
  <div *ngIf="showUserDropdown"
       class="absolute right-0 mt-3 w-64 rounded-sm overflow-hidden animate-slide-down"
       style="background: white; border: 1px solid var(--color-pearl); box-shadow: var(--shadow-floating);">
    <!-- User Info -->
    <div class="px-5 py-4" style="border-bottom: 1px solid var(--color-parchment);">
      <p class="text-sm font-medium" style="font-family: var(--font-heading); color: var(--color-charcoal);">
        {{ currentUser?.firstName }} {{ currentUser?.lastName }}
      </p>
      <p class="text-xs mt-0.5" style="color: var(--color-ash); font-family: var(--font-body);">
        {{ currentUser?.email }}
      </p>
    </div>
    <!-- Menu Items -->
    <div class="py-2">
      <button (click)="navigateToOrders()"
              class="w-full text-left px-5 py-2.5 text-xs tracking-[0.08em] uppercase flex items-center gap-3 transition-all duration-200"
              style="font-family: var(--font-body); color: var(--color-slate);"
              onmouseover="this.style.backgroundColor='var(--color-parchment)'; this.style.color='var(--color-charcoal)'"
              onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--color-slate)'">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
        </svg>
        Order History
      </button>
      <button (click)="navigateToCart()"
              class="w-full text-left px-5 py-2.5 text-xs tracking-[0.08em] uppercase flex items-center gap-3 transition-all duration-200"
              style="font-family: var(--font-body); color: var(--color-slate);"
              onmouseover="this.style.backgroundColor='var(--color-parchment)'; this.style.color='var(--color-charcoal)'"
              onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--color-slate)'">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
        </svg>
        My Cart
      </button>
    </div>
    <!-- Logout -->
    <div style="border-top: 1px solid var(--color-parchment);">
      <button (click)="logout()"
              class="w-full text-left px-5 py-3 text-xs tracking-[0.08em] uppercase flex items-center gap-3 transition-all duration-200"
              style="font-family: var(--font-body); color: var(--color-error);"
              onmouseover="this.style.backgroundColor='rgba(166, 93, 87, 0.05)'"
              onmouseout="this.style.backgroundColor='transparent'">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
        </svg>
        Sign Out
      </button>
    </div>
  </div>
</div>
